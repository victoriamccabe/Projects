@model IEnumerable<YourProjectName.Areas.Rental.Models.RentalHistory>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Styles.Render("~/bundles/bootstrap")



<div class="align-items-center">
    <h2 class="rent-card text-center">Index</h2>


    <p>
        @Html.ActionLink("Create New", "Create")
    </p>




    @* ---------------- Rental History Table ---------------- *@
<table class="table custom-bordered-tbody table-light index-table">
    <thead>
        <tr>
            <th colspan="2">
                <div class="d-flex justify-content-between align-items-center">
                    <!-- Left side -->
                    <span class="th-text">Most Recent Rental Histories</span>

                    <!-- Right side -->
                    <div class="d-flex align-items-center">
                        <label for="sortSelect" class="m-0 th-text pl-5">Sorted by:</label>
                        <select id="sortSelect" class="form-control">
                            <option value="none">No Extra Sorting...</option>
                            <option value="damaged">Damaged Rentals</option>
                            <option value="undamaged">Undamaged Rentals</option>
                            <option value="az">Rentals A - Z</option>
                            <option value="za">Rentals Z - A</option>
                        </select>
                    </div>
                </div>
            </th>
        </tr>
    </thead>
    <tbody class="table-striped">
        @* Loop through each item in the Model and make a table row *@
        @foreach (var item in Model)
        {
            <tr>
                <td class="align-middle">
                    @* Use flexbox to put content on left and right sides *@
                    <div class="d-flex align-items-center justify-content-between">

                        @* ---------------- LEFT SIDE: Icon, Badge, Damages ---------------- *@
                        <div class="d-flex align-items-center table-responsive-sd">

                            @* Decide which icon to show depending if RentalDamaged is true or false *@
                            @{
                                var iconClass = item.RentalDamaged ? "bi-x-circle-fill text-danger" : "bi-check-circle-fill text-success";
                                var iconPath = item.RentalDamaged
                                    ? "M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"
                                    : "M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z";
                            }

                            @* Show the icon SVG *@
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                 class="bi @iconClass mr-2" viewBox="0 0 16 16">
                                <path d="@iconPath" />
                            </svg>

                            @* Show the rental name inside a dark badge *@
                            <span class="badge badge-dark mr-2 rental-badge">
                                @Html.DisplayFor(modelItem => item.Rental)
                            </span>

                            @* Show damages text, muted if not damaged *@
                            <span class="damage-text @(item.RentalDamaged ? "" : "text-muted")">
                                @Html.DisplayFor(modelItem => item.DamagesIncurred)
                            </span>

                            @* Add a "..." link so user can click to see full details *@
                            <a href="@Url.Action("Details", new { id = item.RentalHistoryId })"
                               class="ellipses text-muted"
                               title="@item.DamagesIncurred">
                                ...
                            </a>
                        </div>

                        @* ---------------- RIGHT SIDE: Three Dots Dropdown ---------------- *@
                        <div class="dropdown">
                            @* Button with three dots to open dropdown menu *@
                            <button class="btn btn-outline-dark threedot-btn" type="button"
                                    id="menuButton-@item.RentalHistoryId" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                     fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" />
                                </svg>
                            </button>

                            @* Dropdown menu *@
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="menuButton-@item.RentalHistoryId">

                                @* Edit *@
                                <a href="@Url.Action("Edit", new { id = item.RentalHistoryId })"
                                   class="dropdown-item d-flex align-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                         style="flex-shrink:0;" viewBox="0 0 16 16" class="mr-2">
                                        <path d="M15.502 1.94a.5.5 0 0 1 0 .706l-1.439 1.439-2.122-2.122 1.439-1.439a.5.5 0 0 1 .707 0l1.415 1.416zm-2.561 2.561L4.939 12.503H2.5V10.06l7.999-7.999 2.442 2.44z" />
                                        <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5V8a.5.5 0 0 0-1 0v5.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H8a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
                                    </svg>
                                    Edit
                                </a>

                                @* Details *@
                                <a href="@Url.Action("Details", new { id = item.RentalHistoryId })"
                                   class="dropdown-item d-flex align-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                         style="flex-shrink:0;" viewBox="0 0 16 16" class="mr-2">
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2" />
                                    </svg>
                                    Details
                                </a>

                                @* Delete *@
                                <a href="@Url.Action("Delete", new { id = item.RentalHistoryId })"
                                   class="dropdown-item d-flex align-items-center text-danger">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                         style="flex-shrink:0;" viewBox="0 0 16 16" class="mr-2">
                                        <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0" />
                                    </svg>
                                    Delete
                                </a>

                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        }
    </tbody>
</table>
</div>






@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/Rent")
}

